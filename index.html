<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bacterial Energy Automaton ‚Äî minimal & extensible</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>üß´ Bacterial Energy Automaton</h1>
    <div class="sub">Simple rules ‚Üí growth fronts, depletion, spread. All in one file.</div>
  </header>

  <div class="board-wrap">
    <canvas id="view" width="600" height="400" aria-label="Simulation view"></canvas>
    <div class="hud" id="hud"></div>
  </div>

  <div class="panel">
    <div class="section">
      <h3>Run controls</h3>
      <div class="btns">
        <button id="btnToggle" class="primary">‚ñ∂Ô∏è Start</button>
        <button id="btnStep">Step</button>
        <button id="btnReset" class="warn">Reset</button>
        <button id="btnSeedB" title="Add bacteria">+ Bacteria</button>
        <button id="btnSeedF" title="Re-seed food field">Re-seed Food</button>
      </div>
      <div class="row" style="margin-top:10px">
        <label>Speed (ticks / frame)</label>
        <input id="speed" type="range" min="1" max="50" step="1" value="8" />
      </div>
      <div class="small">Tip: Start slow, then increase speed once it's stable.</div>
    </div>

    <div class="section">
      <h3>Biology params</h3>
      <div class="knob-grid">
        <div class="knob" data-key="u_max" data-min="0" data-max="2" data-step="0.01" title="Max uptake rate. Higher = faster consumption at high food.">
          <div class="knob__title">u_max</div>
          <div class="knob__dial" aria-label="u_max"><div class="knob__indicator"></div></div>
          <div class="knob__value">1.00</div>
          <input id="u_max" type="hidden" value="1.0" />
        </div>
        <div class="knob" data-key="K" data-min="0.01" data-max="1.0" data-step="0.01" title="Half-saturation constant in Monod uptake. Lower = more efficient at low food.">
          <div class="knob__title">K (half-sat)</div>
          <div class="knob__dial" aria-label="K"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.20</div>
          <input id="K" type="hidden" value="0.2" />
        </div>
        <div class="knob" data-key="c_maint" data-min="0" data-max="0.5" data-step="0.01" title="Maintenance energy cost per tick. Higher = more deaths in scarcity.">
          <div class="knob__title">Maintenance (c_maint)</div>
          <div class="knob__dial" aria-label="c_maint"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.10</div>
          <input id="c_maint" type="hidden" value="0.10" />
        </div>
        <div class="knob" data-key="Y_E" data-min="0.1" data-max="2.0" data-step="0.01" title="Yield: food uptake converted to internal energy.">
          <div class="knob__title">Yield to energy (Y_E)</div>
          <div class="knob__dial" aria-label="Y_E"><div class="knob__indicator"></div></div>
          <div class="knob__value">1.00</div>
          <input id="Y_E" type="hidden" value="1.0" />
        </div>
        <div class="knob" data-key="E_div" data-min="0.5" data-max="6.0" data-step="0.1" title="Energy threshold for division. When reached, can spawn offspring.">
          <div class="knob__title">Division threshold (E_div)</div>
          <div class="knob__dial" aria-label="E_div"><div class="knob__indicator"></div></div>
          <div class="knob__value">3.0</div>
          <input id="E_div" type="hidden" value="3.0" />
        </div>
        <div class="knob" data-key="E_new" data-min="0.5" data-max="3.0" data-step="0.1" title="Energy given to offspring upon division.">
          <div class="knob__title">Offspring energy (E_new)</div>
          <div class="knob__dial" aria-label="E_new"><div class="knob__indicator"></div></div>
          <div class="knob__value">1.5</div>
          <input id="E_new" type="hidden" value="1.5" />
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Food field</h3>
      <div class="knob-grid">
        <div class="knob" data-key="D" data-min="0" data-max="0.5" data-step="0.01" title="Diffusion of food between tiles. Higher = smoother gradients.">
          <div class="knob__title">Diffusion (D)</div>
          <div class="knob__dial" aria-label="D"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.10</div>
          <input id="D" type="hidden" value="0.10" />
        </div>
        <div class="knob" data-key="r" data-min="0" data-max="0.05" data-step="0.001" title="Replenishment rate toward Fmax each tick.">
          <div class="knob__title">Replenish (r)</div>
          <div class="knob__dial" aria-label="r"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.010</div>
          <input id="r" type="hidden" value="0.01" />
        </div>
        <div class="knob" data-key="Fmax" data-min="0.1" data-max="2.0" data-step="0.1" title="Carrying capacity of food field.">
          <div class="knob__title">F_max</div>
          <div class="knob__dial" aria-label="Fmax"><div class="knob__indicator"></div></div>
          <div class="knob__value">1.0</div>
          <input id="Fmax" type="hidden" value="1.0" />
        </div>
        <div class="knob" data-key="delta" data-min="0" data-max="0.1" data-step="0.001" title="Food decay per tick (fraction).">
          <div class="knob__title">Decay (Œ¥)</div>
          <div class="knob__dial" aria-label="delta"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.000</div>
          <input id="delta" type="hidden" value="0.00" />
        </div>
        <div class="knob" data-key="seedNoise" data-min="0" data-max="1.0" data-step="0.01" title="Random noise added to initial food field.">
          <div class="knob__title">Seed noise</div>
          <div class="knob__dial" aria-label="seedNoise"><div class="knob__indicator"></div></div>
          <div class="knob__value">0.35</div>
          <input id="seedNoise" type="hidden" value="0.35" />
        </div>
      </div>
    </div>

    <div class="section">
      <h3>World</h3>
      <div class="row"><label>Grid (W√óH)</label><span class="value" id="gridSize">150√ó100</span></div>
      <div class="row"><label>Pixel scale</label><span class="value" id="pxScale">4</span></div>
      <div class="row"><label>Initial bacteria</label><input id="initB" type="number" step="1" value="150"></div>
      <div class="row"><label>Random seed</label><input id="rngSeed" type="text" value="42"></div>
      <div class="small">Re-run Reset after changing seed or counts.</div>
      <div style="margin-top:6px">
        <span class="small">Presets:</span>
        <button class="preset" data-preset="bloom">Bloom</button>
        <button class="preset" data-preset="patchy">Patchy</button>
        <button class="preset" data-preset="harsh">Harsh</button>
        <button class="preset" data-preset="fastdiff">Fast diffusion</button>
      </div>
    </div>

    <div class="section">
      <h3>Legend</h3>
      <div class="small">Food field = dark‚Üíbright. Bacteria = pale green pixels. Division places offspring in a random neighboring tile. No movement by default (add easily).</div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
